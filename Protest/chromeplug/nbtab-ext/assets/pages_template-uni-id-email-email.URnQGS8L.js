import{b3 as e,b as l,w as t,$ as a,o as d,j as s,I as o,t as i,aw as n,a1 as u}from"./index-DyMGAvsR.js";import{_ as f}from"./_plugin-vue_export-helper.BCo6x5W8.js";let r=uni.vk;const m=f({data:()=>({form1:{email:"",code:""}}),onLoad(e){r=uni.vk},methods:{getCode(){const e="00000"+Math.floor(1e6*Math.random());this.form1.code=e.substring(e.length-6)},sendEmailCode(l){if(!/.+@.+/.test(this.form1.email))return void e({content:"请输入正确的邮箱",showCancel:!1});let t=this.form1;r.userCenter.sendEmailCode({data:{serviceType:"qq",email:t.email,type:l},success:e=>{r.alert("邮件发送成功")}})},setVerifyCode(l){let t=this;if(!/.+@.+/.test(t.form1.email))return void e({content:"请输入正确的邮箱",showCancel:!1});t.getCode();let a=t.form1;r.userCenter.setVerifyCode({data:{email:a.email,code:a.code,type:l},success:e=>{r.toast("发送成功")}})},loginByEmail(){let e=this.form1;r.userCenter.loginByEmail({data:e,success:e=>{r.alert("登录成功")}})},bindEmail(){let e=this.form1;r.userCenter.bindEmail({data:e,success:e=>{r.alert("绑定成功")}})},unbindEmail(){let e=this.form1;r.userCenter.unbindEmail({data:e,success:e=>{r.alert("解绑成功")}})}}},[["render",function(e,f,r,m,c,p){const y=n,C=a,_=u;return d(),l(C,{class:"content"},{default:t((()=>[s(y,{type:"text",placeholder:"邮箱",modelValue:c.form1.email,"onUpdate:modelValue":f[0]||(f[0]=e=>c.form1.email=e)},null,8,["modelValue"]),s(y,{type:"text",placeholder:"验证码",modelValue:c.form1.code,"onUpdate:modelValue":f[1]||(f[1]=e=>c.form1.code=e)},null,8,["modelValue"]),s(C,{class:"tips",style:{color:"red"}},{default:t((()=>[o("上次发送的验证码："+i(c.form1.code),1)])),_:1}),s(C,{class:"title"},{default:t((()=>[o("邮箱注册&登录相关")])),_:1}),s(C,{class:"tips",style:{"text-align":"left"}},{default:t((()=>[o("如需要使用此功能，先确保已安装npm包 "),s(C,null,{default:t((()=>[o('"nodemailer": "^6.4.11"')])),_:1})])),_:1}),s(C,{style:{display:"flex"}},{default:t((()=>[s(_,{type:"default",onClick:f[2]||(f[2]=e=>p.sendEmailCode("login"))},{default:t((()=>[o("真实-发送验证码")])),_:1}),s(_,{type:"default",onClick:f[3]||(f[3]=e=>p.setVerifyCode("login"))},{default:t((()=>[o("模拟-发送验证码")])),_:1})])),_:1}),s(_,{type:"default",onClick:p.loginByEmail},{default:t((()=>[o("邮箱验证码登录（不存在则注册）")])),_:1},8,["onClick"]),s(C,{class:"title"},{default:t((()=>[o("绑定邮箱相关")])),_:1}),s(C,{style:{display:"flex"}},{default:t((()=>[s(_,{type:"default",onClick:f[4]||(f[4]=e=>p.sendEmailCode("bind"))},{default:t((()=>[o("真实-发送验证码")])),_:1}),s(_,{type:"default",onClick:f[5]||(f[5]=e=>p.setVerifyCode("bind"))},{default:t((()=>[o("模拟-发送验证码")])),_:1})])),_:1}),s(_,{type:"default",onClick:p.bindEmail},{default:t((()=>[o("绑定邮箱（需先登录）")])),_:1},8,["onClick"]),s(C,{class:"tips"},{default:t((()=>[o("绑定邮箱时如果不传验证码或者传空则直接绑定并设置email_confirmed为1，不会去校验验证码")])),_:1}),s(C,{class:"title"},{default:t((()=>[o("解绑邮箱相关")])),_:1}),s(C,{style:{display:"flex"}},{default:t((()=>[s(_,{type:"default",onClick:f[6]||(f[6]=e=>p.sendEmailCode("unbind"))},{default:t((()=>[o("真实-发送验证码")])),_:1}),s(_,{type:"default",onClick:f[7]||(f[7]=e=>p.setVerifyCode("unbind"))},{default:t((()=>[o("模拟-发送验证码")])),_:1})])),_:1}),s(_,{type:"default",onClick:p.unbindEmail},{default:t((()=>[o("解绑邮箱（需先登录）")])),_:1},8,["onClick"]),s(C,{class:"tips"},{default:t((()=>[o("解绑邮箱时如果不传验证码或者传空则直接解除绑定绑定，不会去校验验证码")])),_:1})])),_:1})}],["__scopeId","data-v-5638804d"]]);export{m as default};
