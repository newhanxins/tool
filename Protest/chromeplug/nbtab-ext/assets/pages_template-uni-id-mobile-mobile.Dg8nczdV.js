import{b3 as e,b as t,w as l,$ as s,o,j as d,I as a,t as i,aw as n,a1 as u}from"./index-DyMGAvsR.js";import{_ as r}from"./_plugin-vue_export-helper.BCo6x5W8.js";let f=uni.vk;const c=r({data:()=>({form1:{mobile:"",code:"",password:"123456"}}),onLoad(e){f=uni.vk},methods:{getCode(){const e="00000"+Math.floor(1e6*Math.random());this.form1.code=e.substring(e.length-6)},sendSmsCode(t){if(!/^1\d{10}$/.test(this.form1.mobile))return void e({content:"请输入正确的手机号",showCancel:!1});let l=this.form1;f.userCenter.sendSmsCode({data:{mobile:l.mobile,type:t},success:e=>{f.alert("短信发送成功")}})},setVerifyCode(t){let l=this;if(!/^1\d{10}$/.test(l.form1.mobile))return void e({content:"请输入正确的手机号",showCancel:!1});l.getCode();let s=l.form1;f.userCenter.setVerifyCode({data:{mobile:s.mobile,code:s.code,type:t},success:e=>{f.toast("发送成功")}})},loginBySms(){let e=this.form1;f.userCenter.loginBySms({data:e,success:e=>{f.alert("登录成功")}})},bindMobile(){let e=this.form1;f.userCenter.bindMobile({data:e,success:e=>{f.alert("绑定成功")}})},unbindMobile(){let e=this.form1;f.userCenter.unbindMobile({data:e,success:e=>{f.alert("解绑成功")}})},resetPasswordByMobile(){let e=this.form1;f.userCenter.resetPasswordByMobile({data:e,success:t=>{f.alert("密码重置成功,新密码为:"+e.password)}})}}},[["render",function(e,r,f,c,m,p){const y=n,C=s,b=u;return o(),t(C,{class:"content"},{default:l((()=>[d(y,{type:"text",placeholder:"手机号",modelValue:m.form1.mobile,"onUpdate:modelValue":r[0]||(r[0]=e=>m.form1.mobile=e)},null,8,["modelValue"]),d(y,{type:"text",placeholder:"验证码",modelValue:m.form1.code,"onUpdate:modelValue":r[1]||(r[1]=e=>m.form1.code=e)},null,8,["modelValue"]),d(C,{class:"tips",style:{color:"red"}},{default:l((()=>[a("上次发送的验证码："+i(m.form1.code),1)])),_:1}),d(C,{class:"title"},{default:l((()=>[a("手机号注册&登录相关")])),_:1}),d(C,{style:{display:"flex"}},{default:l((()=>[d(b,{type:"default",onClick:r[2]||(r[2]=e=>p.sendSmsCode("login"))},{default:l((()=>[a("真实-发送验证码")])),_:1}),d(b,{type:"default",onClick:r[3]||(r[3]=e=>p.setVerifyCode("login"))},{default:l((()=>[a("模拟-发送验证码")])),_:1})])),_:1}),d(b,{type:"default",onClick:p.loginBySms},{default:l((()=>[a("短信验证码登录（不存在则注册）")])),_:1},8,["onClick"]),d(C,{class:"tips"},{default:l((()=>[a("已支持阿里云短信发送，如果不使用uni-id自带的发送验证码功能，可以修改公共模块config中的vk.service.sms.aliyun参数")])),_:1}),d(C,{class:"title"},{default:l((()=>[a("绑定手机相关")])),_:1}),d(C,{style:{display:"flex"}},{default:l((()=>[d(b,{type:"default",onClick:r[4]||(r[4]=e=>p.sendSmsCode("bind"))},{default:l((()=>[a("真实-发送验证码")])),_:1}),d(b,{type:"default",onClick:r[5]||(r[5]=e=>p.setVerifyCode("bind"))},{default:l((()=>[a("模拟-发送验证码")])),_:1})])),_:1}),d(b,{type:"default",onClick:p.bindMobile},{default:l((()=>[a("绑定手机号（需先登录）")])),_:1},8,["onClick"]),d(C,{class:"tips"},{default:l((()=>[a("绑定手机时如果不传验证码或者传空则直接绑定并设置mobile_confirmed为1，不会去校验验证码")])),_:1}),d(C,{class:"title"},{default:l((()=>[a("解绑手机相关")])),_:1}),d(C,{style:{display:"flex"}},{default:l((()=>[d(b,{type:"default",onClick:r[6]||(r[6]=e=>p.sendSmsCode("unbind"))},{default:l((()=>[a("真实-发送验证码")])),_:1}),d(b,{type:"default",onClick:r[7]||(r[7]=e=>p.setVerifyCode("unbind"))},{default:l((()=>[a("模拟-发送验证码")])),_:1})])),_:1}),d(b,{type:"default",onClick:p.unbindMobile},{default:l((()=>[a("解绑手机（需先登录）")])),_:1},8,["onClick"]),d(C,{class:"tips"},{default:l((()=>[a("解绑手机时如果不传验证码或者传空则直接解除绑定绑定，不会去校验验证码")])),_:1}),d(C,{class:"title"},{default:l((()=>[a("手机号验证码重置密码")])),_:1}),d(C,{style:{display:"flex"}},{default:l((()=>[d(b,{type:"default",onClick:r[8]||(r[8]=e=>p.sendSmsCode("reset-pwd"))},{default:l((()=>[a("真实-发送验证码")])),_:1}),d(b,{type:"default",onClick:r[9]||(r[9]=e=>p.setVerifyCode("reset-pwd"))},{default:l((()=>[a("模拟-发送验证码")])),_:1})])),_:1}),d(b,{type:"default",onClick:p.resetPasswordByMobile},{default:l((()=>[a("重置密码（需先登录）")])),_:1},8,["onClick"])])),_:1})}],["__scopeId","data-v-3bb43258"]]);export{c as default};
