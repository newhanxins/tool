import{b as e,w as t,$ as i,o,j as s,I as n,a1 as a}from"./index-DyMGAvsR.js";import{_ as d}from"./_plugin-vue_export-helper.BCo6x5W8.js";let l=uni.vk;const c=d({data:()=>({options:{}}),onLoad(e){l=uni.vk,this.options=e||{},this.init(e)},methods:{init(e){if(this.options.code)return l.toast("已获取到code，请点击相应操作。"),!1},getWeixinCode(e){let t=`https://open.weixin.qq.com/connect/oauth2/authorize?appid=&redirect_uri=${window.location.href.split("?")[0]}&response_type=code&scope=${e}&state=STATE#wechat_redirect`;window.location.href=t},code2SessionWeixin(){let e=this;if(!e.options.code)return l.toast("请先获取code"),!1;l.userCenter.code2SessionWeixin({data:{code:e.options.code,state:e.options.state},success:e=>{l.alert(JSON.stringify(e))}})},loginByWeixin(e){let t=this;if(!t.options.code)return l.toast("请先获取code"),!1;l.userCenter.loginByWeixin({data:{code:t.options.code,state:t.options.state,type:e},success:e=>{l.alert(e.msg),t.data=e}})},bindWeixin(){let e=this;if(!e.options.code)return l.toast("请先获取code"),!1;l.userCenter.bindWeixin({data:{code:e.options.code},success:t=>{l.alert("绑定成功"),e.data=t}})},unbindWeixin(){let e=this;l.userCenter.unbindWeixin({success:t=>{l.alert("解绑成功"),e.data=t}})}}},[["render",function(d,l,c,u,r,p){const f=i,_=a;return o(),e(f,{class:"content"},{default:t((()=>[s(f,{class:"tips",style:{color:"red"}},{default:t((()=>[n("注意：公众号接口请在微信开发者工具中使用公众号网页调试，无法在PC浏览器中直接调试。且还需要使用真实域名来访问，不可以用ip或localhost访问。")])),_:1}),s(_,{type:"default",onClick:l[0]||(l[0]=e=>p.getWeixinCode("snsapi_base"))},{default:t((()=>[n("静默授权获取code")])),_:1}),s(f,{class:"tips"},{default:t((()=>[n("静默授权获取code，且页面会刷新。")])),_:1}),s(_,{type:"default",onClick:p.code2SessionWeixin},{default:t((()=>[n("获取微信openid")])),_:1},8,["onClick"]),s(f,{class:"tips"},{default:t((()=>[n("以下API有授权弹窗")])),_:1}),s(_,{type:"default",onClick:l[1]||(l[1]=e=>p.getWeixinCode("snsapi_userinfo"))},{default:t((()=>[n("用户授权获取code")])),_:1}),s(f,{class:"tips"},{default:t((()=>[n("用户授权获取code，且页面会刷新。")])),_:1}),s(_,{type:"default",onClick:l[2]||(l[2]=e=>p.loginByWeixin("register"))},{default:t((()=>[n("微信注册")])),_:1}),s(_,{type:"default",onClick:l[3]||(l[3]=e=>p.loginByWeixin("login"))},{default:t((()=>[n("微信登录")])),_:1}),s(_,{type:"default",onClick:l[4]||(l[4]=e=>p.loginByWeixin())},{default:t((()=>[n("微信登录(不存在自动注册)")])),_:1}),s(_,{type:"default",onClick:l[5]||(l[5]=e=>p.bindWeixin())},{default:t((()=>[n("绑定微信")])),_:1}),s(_,{type:"default",onClick:l[6]||(l[6]=e=>p.unbindWeixin())},{default:t((()=>[n("解绑微信")])),_:1})])),_:1})}],["__scopeId","data-v-e3b54f8d"]]);export{c as default};
