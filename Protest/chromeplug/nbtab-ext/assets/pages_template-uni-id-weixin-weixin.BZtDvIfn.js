import{b4 as e,b as t,w as n,$ as i,o as s,j as r,I as a,a1 as d}from"./index-DyMGAvsR.js";import{_ as c}from"./_plugin-vue_export-helper.BCo6x5W8.js";let u=uni.vk;const o=c({data:()=>({hasWeixinAuth:!0,encryptedKey:"",image:"",data:{}}),onLoad(e){u=uni.vk,this.init()},methods:{init(){},loginByWeixin(e){let t=this;u.userCenter.loginByWeixin({data:{type:e},success:e=>{u.alert(e.msg),t.data=e}})},code2SessionWeixin(){u.userCenter.code2SessionWeixin({success:e=>{u.alert(JSON.stringify(e))}})},setUserInfo(){let t=this;e({provider:"weixin",success:e=>{uni.getUserInfo({provider:"weixin",success:e=>{t.data=e;let{userInfo:n}=e;u.userCenter.updateUser({data:{nickname:n.nickName,avatar:n.avatarUrl,gender:n.gender},success:e=>{u.alert("设置成功")}})}})}})},bindWeixin(){let e=this;u.userCenter.bindWeixin({success:t=>{u.alert("绑定成功"),e.data=t}})},unbindWeixin(){let e=this;u.userCenter.unbindWeixin({success:t=>{u.alert("解绑成功"),e.data=t}})},getPhoneNumber1(e){let{code:t}=e.detail;if(!t)return!1;u.userCenter.getPhoneNumber({data:{code:t,encryptedKey:this.encryptedKey},success:e=>{u.alert("手机号:"+e.phone)}})},getPhoneNumber2(e){let{encryptedData:t,iv:n}=e.detail;if(!t||!n)return!1;u.userCenter.getPhoneNumber({data:{encryptedData:t,iv:n,encryptedKey:this.encryptedKey},success:e=>{u.alert("手机号:"+e.phone)}})},loginByWeixinPhoneNumber1(e){let{code:t}=e.detail;if(!t)return!1;u.userCenter.loginByWeixinPhoneNumber({data:{code:t,encryptedKey:this.encryptedKey},success(e){u.alert(e.msg)}})},loginByWeixinPhoneNumber2(e){let{encryptedData:t,iv:n}=e.detail;if(!t||!n)return!1;u.userCenter.loginByWeixinPhoneNumber({data:{encryptedData:t,iv:n,encryptedKey:this.encryptedKey},success(e){u.alert(e.msg)}})}}},[["render",function(e,c,u,o,l,y){const p=d,h=i;return s(),t(h,{class:"content"},{default:n((()=>[r(p,{type:"default",onClick:c[0]||(c[0]=t=>e.vk.navigateTo("../../openapi/weixin/weixin"))},{default:n((()=>[a("小程序API")])),_:1})])),_:1})}],["__scopeId","data-v-bd2b80bb"]]);export{o as default};
