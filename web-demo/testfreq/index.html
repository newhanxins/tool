<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>freq chart</title>
  <style>
    html,body{
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
    #mycanvas {
      margin: 0;
      width: 100%;
      height: 400px;
    }
    #consolelogs{
      height: 200px;
      overflow: auto;
    }
  </style>
</head>
<body>
  <div id="mycanvas" style="color: rebeccapurple;"></div>

<button id="onloadclick" onclick="window.location.reload()">刷新页面</button>
<button id="onloadclick" onclick="cleartext()">清空</button>
<div id="consolelogs"></div>
  <!-- 引入你的编译库 -->
  <script type="text/javascript" src=".js/jquery-1.11.2.min.js"></script>

  <script src="./dist/index.js"></script>
  <script>

    var freqCharts=""
    window.onload = function() {
      var options={
        "background":"#fff",
        "type":"FFT",//FFT DScan
        "duration": 50,
        "width":'100%',//画布宽度
        "height": '100%',//画布高度
        "center_freq":200000000,
        "span":2000000,
        "grid":{
          "width":1,
          "color":"#B7B7B7",
          "xgrid_line_dash":[15,5]
        },
        "xaxis":{
          "width":1,
          "unit":"MHz",
          "decimals":4,
          "color":"#333",
          "label_angle":30,//X轴标签倾斜角度
        }
      }
      var tree_data={
          "table_name": "中国",
          "format_type": 1,
          "business_list": 
          [
            {
              "business_id": 1,
              "color": "#00FFFF",
              "language":
              [
                {
                  "code": 2052,
                  "name": "固定"
                },
                {
                  "code": 1033,
                  "name": "Fixed"
                }
              ]
            },
            {
              "business_id": 2,
              "color": "#FFE4C4",
              "language":
              [
                {
                  "code": 2052,
                  "name": "移动"
                },
                {
                  "code": 1033,
                  "name": "Mobile"
                }
              ]
            },
            {
              "business_id": 3,
              "color": "#8A2BE2",
              "language":
              [
                {
                  "code": 2052,
                  "name": "无线电定位"
                },
                {
                  "code": 1033,
                  "name": "Radiolocation"
                }
              ]
            },
            {
              "business_id": 4,
              "color": "#FF7F50",
              "language":
              [
                {
                  "code": 2052,
                  "name": "水上移动"
                },
                {
                  "code": 1033,
                  "name": "Maritime Mobile"
                }
              ]
            },
            {
              "business_id": 5,
              "color": "#006400",
              "language":
              [
                {
                  "code": 2052,
                  "name": "广播"
                },
                {
                  "code": 1033,
                  "name": "Broadcasting"
                }
              ]
            }
          ],
          "band_list": 
          [
            {
              "start_freq": 2190500,
              "end_freq": 2198000,
              "business": 
              [
                {
                  "business_id": 4
                }
              ]
            },
            {
              "start_freq": 2198000,
              "end_freq": 2300000,
              "business": 
              [
                {
                  "business_id": 1
                },
                {
                  "business_id": 2
                },
                {
                  "business_id": 3
                }
              ]
            },
            {
              "start_freq": 2300000,
              "end_freq": 2495000,
              "foot_notes": ["CHN4"],
              "business": 
              [
                {
                  "business_id": 1
                },
                {
                  "business_id": 2	
                },
                {
                  "business_id": 5,
                  "foot_note": ["5.113"],
                  "extend_band":
                  [
                    [
                      {
                        "start_freq": 2300000,
                        "end_freq": 2310000,
                        "note":["note0001"]
                      },
                      {
                        "start_freq": 2310000,
                        "end_freq": 2320000,
                        "note":["note0001"]
                      }
                    ],
                    [
                      {
                        "start_freq": 2300000,
                        "end_freq": 2350000,
                        "note":["note0002"]
                      },
                      {
                        "start_freq": 2350000,
                        "end_freq": 2400000,
                        "note":["note0002"]
                      }
                    ]
                  ]
                }
              ]
            }
          ],
          "notes_list":
          [
            {
              "note_id": "5.113",
              "language":
              [
                {
                  "code": 2052,
                  "content": "广播业务使用 2300-2495kHz（1 区为 2498kHz），3200-3400kHz，4750-4995kHz和 5005-5060kHz 频段的条件见 5.16 至 5.20，5.21 和 23.3 至 23.10 款。"
                },
                {
                  "code": 1033,
                  "content": "xxxxxxxxxxxx"
                }
              ]
            },
            {
              "note_id": "CHN4",
              "language":
              [
                {
                  "code": 2052,
                  "content": "该频段可有限制地用于无线电定位业务，不得对其他业务产生有害干扰。（2001 年）"
                },
                {
                  "code": 1033,
                  "content": "xxxxxxxxxxxx"
                }
              ]
            },
            {
              "note_id": "note0001",
              "language":
              [
                {
                  "code": 2052,
                  "content": "xxxxxxx"
                },
                {
                  "code": 1033,
                  "content": "xxxxxxxxxxxx"
                }
              ]
            },
            {
              "note_id": "note0002",
              "language":
              [
                {
                  "code": 2052,
                  "content": "xxxxxxx"
                },
                {
                  "code": 1033,
                  "content": "xxxxxxxxxxxx"
                }
              ]
            }
          ]
        }
      freqCharts = new freqChart("mycanvas",options,tree_data);
      // 创建多个元素的HTML字符串
      var htmlContent = '<p>这是第一个段落</p><p>这是第二个段落</p>';
      
      // 使用innerHTML添加多个元素
      // 创建多个元素的HTML字符串
        var htmlContent = '<p>这是第一个段落</p><p>这是第二个段落</p>';
        
        // 使用innerHTML添加多个元素
        document.getElementById("consolelogs").innerHTML += htmlContent;
        document.getElementById("consolelogs").innerHTML += htmlContent;
    };
function showconsole(data){
  var nowdragtimes=new Date().getTime()
  var reqdata=JSON.stringify(data)
  var texts='<p><span>'+nowdragtimes+'</span>'+reqdata+'</p>'
 // $("#consolelogs").append(texts)
 document.getElementById("consolelogs").innerHTML +=texts
}
window.addEventListener('error',function(errorMessage, scriptURI, lineNo, columnNo, error){
  var texts="message:"+errorMessage.message+",line:"+errorMessage.lineno+",filename:"+errorMessage.filename+",error"+JSON.stringify(errorMessage)
  var reqdata = '{"request_type":"map_log报错","name":"代码报错报错报错","request_data":'+texts+'}';
  showconsole(reqdata)
}, true);
function cleartext(){
  document.getElementById("consolelogs").innerHTML ='';
}
  </script>
  
</body>
</html>
